<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Game Log Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-family: 'Source Sans 3', 'Source Sans Pro', Arial, sans-serif;
      padding: 20px;
      font-size: 14px;
      line-height: 1.42857;
      color: rgb(51, 51, 51);
      font-weight: 400;
    }
    table {
      width: 65%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 26px;
    }
    th {
      padding: 22px 26px;
      border: 2.5px solid #ddd;
      background: #3c8dbc;
      color: white;
      text-align: center;
    
    }
    td {
     padding: 22px 26px; /* kurangi tinggi baris */
     border: 1px solid #ddd; /* Tipis */
     border: 1px solid rgba(0, 0, 0, 0.05);
     text-align: center;
    }
    #gameLog tbody td {
     padding-top: 10px;
     padding-bottom: 10px;
     line-height: 1.1;
    }
    .log-row {
     color: rgb(51, 51, 51);
     font-size: 26px; 
     white-space: nowrap;
    }
    th:nth-child(2),
    td:nth-child(2) {
     width: 0px; /* Lebar kolom TableID */
    }
   th:nth-child(7),
   td:nth-child(7) {
     width: 5px; /* Lebar kolom DateTime */
   }
   #gameLog td:nth-child(5),
   #gameLog th:nth-child(5) {
    width: 5px; /* atau berapa pun yang kamu mau */
   }
   #gameLog th:first-child,
  #gameLog td:first-child {
  width: 5px; /* beginmoney */
  white-space: nowrap;
  }
  #gameLog th:nth-child(6),
#gameLog td:nth-child(6) {
  width: 5px; /* endmoney */
}
#gameLog th:nth-child(3),
#gameLog td:nth-child(3) {
  width: 5px; /* bet*/
}
#gameLog th:nth-child(4),
#gameLog td:nth-child(4) {
  width: 5px; /* win */
}
.table-id-highlight {
  width: 36px;               /* Panjang */
  height: 34px;              /* Tinggi - sama untuk bulatan */
  background-color: #d2d6de; /* Warna latar */
  color: #000;               /* Warna teks */
  font-weight: bold;         /* Teks tebal */
  font-size: 24px;           /* Saiz teks */
  border-radius: 50%;        /* Buat bentuk bulat */
  display: flex;             /* Flexbox untuk center teks */
  justify-content: center;   /* Center secara horizontal */
  align-items: center;       /* Center secara vertical */
  margin: 10px auto;         /* Tengah & ada jarak */
}
    button {
      padding: 5px 10px;
      font-size: 14px;
      margin-top: 10px;
      margin-right: 10px;
      background: #28a745;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #218838;
    }
    select, input {
      padding: 3px 6px;
      font-size: 13px;
      margin-left: 10px;
    }
    #nowTime {
      font-weight: bold;
      margin-left: 10px;
      color: #0073e6;
    }

    .set-score-row td {
      color: rgb(51, 51, 51);
      font-size: 27px;
      padding-top: 22px !important;
      padding-bottom: 22px !important;
      line-height: 1.1 !important;
      white-space: nowrap;
      
    }
    .set-score-row td.negatif {
      color: #dd4b39;
      font-weight: bold;
      font-size: 26px;
    }
    .set-score-row td.setscore {
      color: #dd4b39;
      font-weight: 750;;
      font-size: 26px;
      white-space: nowrap;
    }
  </style>
</head>
<body>

<h2>Game Log Generator</h2>

<div style="display: flex; align-items: center; gap: 12px; flex-wrap: wrap; margin-bottom: 15px;">
  <label for="gameSelect">Game:</label>
  <select id="gameSelect" style="height: 38px; font-size: 16px;">
    <option value="">-- Pilih Game --</option>
    <option value="Great88">Great88</option>
    <option value="LuckyBall">LuckyBall</option>
  </select>

  <label for="betSelect">Bet:</label>
  <select id="betSelect" style="height: 38px; font-size: 16px;"></select>

  <label for="pecahanSelect">Pecahan:</label>
  <select id="pecahanSelect" style="height: 38px; font-size: 16px;"></select>
</div>

  <button onclick="setNow()" style="height: 48px; padding: 6px 12px; font-size: 16px;">Click Now</button>

  <label for="manualTime">Set Time:</label>
  <input type="text" id="manualTime" placeholder="YYYY-MM-DD HH:MM:SS"
         style="width: 240px; font-size: 22px; padding: 6px 12px; height: 38px;" />
</div>




<br><br>
<button onclick="generateLog()">Change</button>

<table id="gameLog">
  <thead>
    <tr>
      <th>GameName</th>
      <th>TableID</th>
      <th>Bet</th>
      <th>Win</th>
      <th>BeginMoney</th>
      <th>EndMoney</th>
      <th>DateTime</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script>
  const gameData = {
  Great88: {
    bets: [1.00, 2.00, 3.00, 4.00],
    pecahan: {
      1.00: [10.00, 20.00, 30.00, 40.00, 50.00],
      2.00: [20.00, 40.00, 60.00, 80.00],
      3.00: [30.00, 60.00, 90.00, 120.00],
      4.00: [40.00, 80.00, 120.00, 160.00]
    }
  },
  LuckyBall: {
    bets: [2.50, 5.00],
    pecahan: {
      2.50: [25.00, 50.00, 75.00, 100.00],
      5.00: [50.00, 100.00, 150.00, 200.00]
    }
  }
};
  document.getElementById("gameSelect").addEventListener("change", function () {
  const game = this.value;
  const betSelect = document.getElementById("betSelect");
  const pecahanSelect = document.getElementById("pecahanSelect");
  betSelect.innerHTML = "";
  pecahanSelect.innerHTML = "";

  if (game && gameData[game]) {
    gameData[game].bets.forEach(bet => {
      const option = document.createElement("option");
      option.value = bet;
      option.textContent = bet.toFixed(2);
      betSelect.appendChild(option);
    });

    // Trigger update pecahan otomatis untuk bet pertama
    betSelect.dispatchEvent(new Event("change"));
  }
});

// Update pecahan berdasarkan bet
document.getElementById("betSelect").addEventListener("change", function () {
  const game = document.getElementById("gameSelect").value;
  const bet = parseFloat(this.value);
  const pecahanSelect = document.getElementById("pecahanSelect");
  pecahanSelect.innerHTML = "";

  if (gameData[game] && gameData[game].pecahan[bet]) {
    const pecahanList = gameData[game].pecahan[bet];

    // Acak pecahan dan ambil minimal 4
    const shuffled = pecahanList.sort(() => 0.5 - Math.random());
    const selected = shuffled.slice(0, 4);

    selected.forEach(p => {
      const option = document.createElement("option");
      option.value = p;
      option.textContent = p.toFixed(2);
      pecahanSelect.appendChild(option);
    });
  }
});

 function setNow() {
  const now = new Date();

  // Ambil bagian tahun, bulan, hari, jam, menit, detik dari waktu lokal
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, '0'); // Bulan mulai dari 0
  const day = String(now.getDate()).padStart(2, '0');
  const hour = String(now.getHours()).padStart(2, '0'); // JAM lokal
  const minute = String(now.getMinutes()).padStart(2, '0');
  const second = String(now.getSeconds()).padStart(2, '0');

  // Gabungkan jadi format YYYY-MM-DD HH:MM:SS
  globalTime = `${year}-${month}-${day} ${hour}:${minute}:${second}`;
  document.getElementById("manualTime").value = globalTime;
}
  function rnd(min, max, dec = 2){
    return parseFloat((Math.random() * (max - min) + min).toFixed(dec));
  }

  let globalTime = null;

  function rnd(min, max, dec = 2){
    return parseFloat((Math.random() * (max - min) + min).toFixed(dec));
  }
  function formatDateTimeLocal(date) {
  const y = date.getFullYear();
  const m = String(date.getMonth() + 1).padStart(2, '0');
  const d = String(date.getDate()).padStart(2, '0');
  const h = String(date.getHours()).padStart(2, '0');
  const min = String(date.getMinutes()).padStart(2, '0');
  const s = String(date.getSeconds()).padStart(2, '0');
  return `${y}-${m}-${d} ${h}:${min}:${s}`;
 }
 
  function generateLog() {
  const game = document.getElementById("gameSelect").value;
  const bet = parseFloat(document.getElementById("betSelect").value);
  const pecahanSelect = document.getElementById("pecahanSelect");
  const selectedPecahan = parseFloat(pecahanSelect.value);
  const tbody = document.querySelector("#gameLog tbody");

  let logs = [];

  // Ambil waktu dasar dari input manual atau globalTime
  const manualInput = document.getElementById("manualTime").value.trim();
  let baseTime;
  if (manualInput) {
    const parts = manualInput.split(" ");
    if (parts.length === 2) {
      const [datePart, timePart] = parts;
      const [year, month, day] = datePart.split("-").map(Number);
      const [hour, minute, second] = timePart.split(":").map(Number);
      baseTime = new Date(year, month - 1, day, hour, minute, second);
    } else {
      baseTime = new Date();
    }
  } else if (globalTime) {
    const parts = globalTime.split(" ");
    if (parts.length === 2) {
      const [datePart, timePart] = parts;
      const [year, month, day] = datePart.split("-").map(Number);
      const [hour, minute, second] = timePart.split(":").map(Number);
      baseTime = new Date(year, month - 1, day, hour, minute, second);
    } else {
      baseTime = new Date();
    }
  } else {
    baseTime = new Date();
  }

  // Karena kita mau generate dari waktu awal (paling lama) ke waktu akhir (paling baru),
  // kita mundur waktu dulu 10 langkah * (avg 30 detik) supaya baseTime = waktu paling awal
  baseTime.setSeconds(baseTime.getSeconds() - (10 * 30));

  let balance = rnd(3000, 4000); // saldo awal random

  for (let i = 0; i < 10; i++) {
    const beginMoney = balance;
    const win = Math.random() > 0.7 ? rnd(0, selectedPecahan) : 0.00;
    const endMoney = parseFloat((beginMoney - bet + win).toFixed(2));
    const formattedTime = formatDateTimeLocal(baseTime);

    logs.push({
      game,
      tableID: `<span class="table-id-highlight">0</span>`,
      bet: bet.toFixed(2),
      win: win.toFixed(2),
      beginMoney: beginMoney.toFixed(2),
      endMoney: endMoney.toFixed(2),
      dateTime: formattedTime
    });

    balance = endMoney;
    // Naikkan waktu + beberapa detik supaya waktu naik ke atas nanti
    baseTime.setSeconds(baseTime.getSeconds() + Math.floor(Math.random() * 58 + 3));
  }
  // Ambil waktu dari log pertama (logs[0])
  // Sekarang kita tampilkan logs urut dari paling baru (akhir array) ke paling lama (awal array)
  logs.reverse();

  // Set Score dari log paling atas (waktu paling baru)
const baseDate = new Date(logs[0].dateTime);

// Tambah 5–10 detik (acak)
const extraSeconds = Math.floor(Math.random() * 6) + 5; // 5–10 detik
const setScoreDate = new Date(baseDate.getTime() + extraSeconds * 1000);

// Fungsi bantu format waktu
const pad = n => n.toString().padStart(2, '0');
const formatDateTime = date => {
  return `${date.getFullYear()}-${pad(date.getMonth()+1)}-${pad(date.getDate())} ` +
         `${pad(date.getHours())}:${pad(date.getMinutes())}:${pad(date.getSeconds())}`;
};

// Format waktu set score
const setScoreDateTime = formatDateTime(setScoreDate);

// Buat baris pertama: Set Score
let rows = `
  <tr class="set-score-row">
    <td>-</td>
    <td class="setscore">Set score：${(-Math.abs(parseFloat(setScoreMoney))).toFixed(2)}</td>
    <td class="negatif">-</td>
    <td class="negatif">-</td>
    <td class="negatif">-</td>
    <td class="negatif">-</td>
    <td>${setScoreDateTime}</td>
  </tr>
`;

// Tambahkan baris log berikutnya
logs.forEach(log => {
  rows += `
    <tr>
      <td>${log.tableID}</td>
      <td>${log.description}</td>
      <td>${log.bet}</td>
      <td>${log.win}</td>
      <td>${log.beginMoney}</td>
      <td>${log.endMoney}</td>
      <td>${log.dateTime}</td>
    </tr>
  `;
});

  tbody.innerHTML = rows;
}
</script>

</body>
</html>
