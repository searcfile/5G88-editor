<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover"
/>
<title>5G88 — Login</title>
<link rel="icon" type="image/png" href="https://i.imgur.com/uGijtpF.png" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<style>
  :root{
    --bg1:#080a10;                 /* dark base */
    --bg2:#0b0e17;                 /* deeper */
    --card:#0f1422cc;              /* glass card */
    --edge:rgba(255,215,0,.25);    /* gold edge */
    --gold:#ffd36a;                /* main gold */
    --gold-2:#ffbf40;              /* warm gold */
    --gold-3:#ffea9e;              /* light gold */
    --text:#ececec;
    --sub:#a9a9b2;
    --ring:rgba(255,215,0,.45);
    --shadow:0 10px 40px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
    background:
      radial-gradient(1200px 700px at -10% -20%, rgba(255,185,0,.12) 0%, transparent 60%),
      radial-gradient(1200px 800px at 110% 10%, rgba(255,215,0,.10) 0%, transparent 55%),
      linear-gradient(160deg, var(--bg1), var(--bg2));
    position:relative; overflow-x:hidden;
  }

  /* subtle diagonal texture */
  .bg-lines::before{
    content:""; position:fixed; inset:0; pointer-events:none;
    background:
      repeating-linear-gradient(135deg, rgba(255,215,0,.05) 0 2px, transparent 2px 8px);
    mask-image: radial-gradient(80% 60% at 50% 50%, #000 55%, transparent 80%);
    animation: drift 36s linear infinite;
  }
  @keyframes drift{ from{transform:translateX(-4%)} to{transform:translateX(4%)} }

  /* center wrapper */
  .wrap{ min-height:100dvh; display:grid; place-items:center; padding:24px }

  .card{
    width:min(92vw, 520px);
    border-radius:22px;
    background:linear-gradient(180deg, var(--card), rgba(15,20,34,.78));
    border:1px solid var(--edge);
    box-shadow: var(--shadow), 0 0 0 4px rgba(255,215,0,.08);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    position:relative; overflow:hidden;
  }
  .card::before{
    /* elegant gold edge glow */
    content:""; position:absolute; inset:-1px; border-radius:22px; padding:1px;
    background: conic-gradient(from 210deg at 50% 50%,
      rgba(255,215,0,.0),
      rgba(255,215,0,.35),
      rgba(255,185,0,.28),
      rgba(255,215,0,.0) 70%);
    -webkit-mask:
      linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    pointer-events:none;
  }

  .card-head{ padding:28px 26px 4px; display:flex; justify-content:center }
  .brand{
    width:100%;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    text-align:center;
  }
  .brand img{
    width:min(360px, 80%); max-width:360px; height:auto;
    display:block; margin:0 auto;               /* <-- center */
    filter: drop-shadow(0 10px 24px rgba(255,215,0,.25));
  }

  .card-body{ padding:10px 26px 24px }
  .hint{ color:var(--sub); font-size:13px; text-align:center; margin:8px 0 16px }

  /* button base */
  .btn{
    -webkit-tap-highlight-color: transparent;
    user-select:none; appearance:none; border:0; outline:0; cursor:pointer;
    height:50px; border-radius:14px;
    font-weight:800; font-size:16px; letter-spacing:.2px;
    width:100%; display:inline-flex; align-items:center; justify-content:center;
    gap:12px; position:relative; overflow:hidden;
    transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
    box-shadow: 0 10px 24px rgba(255,185,0,.20);
  }
  .btn:active{ transform: translateY(1px) scale(.995) }

  /* gold primary button */
  .btn-primary{
    color:#2c2100;
    background: linear-gradient(180deg, var(--gold-3), var(--gold));
    border:1px solid rgba(255,185,0,.7);
  }
  .btn-primary:hover{ filter:brightness(1.05) saturate(1.02) }
  .btn-primary:focus-visible{ box-shadow: 0 0 0 4px var(--ring) }

  .btn .ico{ width:22px; height:22px; display:inline-block }

  /* ripple */
  .btn .ripple{
    position:absolute; border-radius:100%;
    transform:scale(0); opacity:.35; pointer-events:none;
    background:#fff; width:8px; height:8px;
    animation: ripple .6s ease-out;
  }
  @keyframes ripple{ to{ transform:scale(28); opacity:0 } }

  /* spinner */
  .spinner{
    width:18px; height:18px; border-radius:50%;
    border:2px solid rgba(0,0,0,.35); border-top-color: transparent;
    animation: spin .9s linear infinite;
  }
  @keyframes spin{ to{ transform: rotate(360deg) } }

  .meta{ margin-top:16px; font-size:12px; color:#c9b67a; text-align:center }

  /* footer */
  .foot{
    margin-top:14px; padding:0 10px 24px; text-align:center; color:#a79662; font-size:12px;
  }

  /* popup */
  .popup-overlay{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background: rgba(10,8,2,.60);
    backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
    z-index: 50;                   /* over everything */
  }
  .popup-box{
    width:min(92vw, 560px);
    min-height: 520px;
    background: linear-gradient(180deg, rgba(24,20,8,.92), rgba(22,18,6,.85));
    border:1px solid rgba(255,215,0,.35);
    border-radius:18px;
    padding:28px 22px 24px;
    display:flex; flex-direction:column; align-items:center; justify-content:center; gap:14px;
    box-shadow: var(--shadow);
    position:relative; overflow:hidden;
    animation: zoomIn .28s ease forwards;
  }
  .popup-box::before{
    content:""; position:absolute; inset:-1px; border-radius:18px; padding:1px;
    background: conic-gradient(from 210deg at 50% 50%,
      rgba(255,215,0,.0),
      rgba(255,215,0,.35),
      rgba(255,185,0,.28),
      rgba(255,215,0,.0) 70%);
    -webkit-mask:
      linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    pointer-events:none;           /* make sure not blocking clicks */
  }
  .popup-title{
    font-size:28px; font-weight:800;
    background: linear-gradient(90deg, var(--gold-3), var(--gold));
    -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
    text-align:center; margin:0 0 6px;
  }
  .popup-logo{
    width:min(380px, 72vw); height:auto;
    filter: drop-shadow(0 8px 28px rgba(255,215,0,.40));
    display:block; margin: 8px auto 0;
  }
  .popup-actions{ display:flex; gap:10px; margin-top:14px; pointer-events:auto }
  .popup-btn{
    height:42px; padding:0 18px; border-radius:12px;
    background: linear-gradient(180deg, var(--gold-3), var(--gold));
    border:1px solid rgba(255,185,0,.7);
    color:#2c2100; font-weight:800; cursor:pointer;
    transition: background .15s ease, transform .12s ease, filter .2s ease;
    box-shadow: 0 10px 18px rgba(255,185,0,.20);
  }
  .popup-btn:hover{ filter:brightness(1.05) }
  .popup-close{
    position:absolute; top:10px; right:10px;
    height:36px; padding:0 12px; border-radius:10px;
    border:1px solid rgba(255,215,0,.45); background: rgba(24,20,8,.65);
    color:#ffe9a8; font-weight:800; cursor:pointer; z-index:2;
  }
  @keyframes zoomIn{ from{ transform: scale(.9); opacity:0 } to{ transform: scale(1); opacity:1 } }

  /* accessibility helper */
  .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0 }

  @media (max-width:420px){
    .card{ border-radius:18px }
    .card-head{ padding:22px 18px 0 }
    .card-body{ padding:10px 18px 18px }
  }
</style>
</head>
<body>
  <div class="bg-lines" aria-hidden="true"></div>

  <!-- Welcome Popup -->
  <div class="popup-overlay" id="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
    <div class="popup-box" id="popupBox">
      <button class="popup-close" onclick="closePopup()" aria-label="Close welcome">×</button>
      <h2 class="popup-title" id="popupTitle">Welcome to 5G88</h2>
      <img src="https://api.5g88.homes/media/LOADING_GIF.webp" alt="5G88 Logo" class="popup-logo">
      <div class="popup-actions">
        <button class="popup-btn" onclick="closePopup()">OK</button>
      </div>
    </div>
  </div>

  <!-- Main Card -->
  <main class="wrap" role="main">
    <section class="card" aria-label="Login card">
      <header class="card-head">
        <div class="brand">
          <!-- CENTERED LOGO -->
          <img src="https://i.imgur.com/QrxyBjc.png" alt="5G88 x EVO VIP">
        </div>
      </header>

      <div class="card-body">
        <p class="hint">Sign in with Google to continue</p>

        <button class="btn btn-primary" id="googleLoginBtn" aria-label="Login with Google">
          <svg class="ico" viewBox="0 0 533.5 544.3" aria-hidden="true">
            <path d="M533.5 278.4c0-18.5-1.7-36.4-4.9-53.6H272v101.4h147c-6.3 34-25 62.8-53.3 82v68.1h86.1c50.5-46.6 81.7-115.3 81.7-198z" fill="#4285f4"/>
            <path d="M272 544.3c71.4 0 131.4-23.6 175.2-64.1l-86.1-68.1c-23.9 16.1-54.5 25.7-89.1 25.7-68.5 0-126.4-46.2-147.2-108.2H36.7v67.8C79.9 490.7 169.6 544.3 272 544.3z" fill="#34a853"/>
            <path d="M124.8 329.6c-10.2-30.6-10.2-63.7 0-94.3V167.4H36.7c-37.7 75.5-37.7 165.9 0 241.4l88.1-79.2z" fill="#fbbc05"/>
            <path d="M272 106.1c38.9-.6 76.2 13.7 105 40.2l78.3-78.3C402.9 24.3 340.2-.2 272 0 169.6 0 79.9 53.6 36.7 135.5l88.1 67.8C145.6 152.3 203.5 106.1 272 106.1z" fill="#ea4335"/>
          </svg>
          <span class="btn-text">Login with Google</span>
        </button>

        <div class="meta">Your access is protected. Unauthorized users will be blocked.</div>
      </div>

      <div class="foot">© <span id="year"></span> 5G88 — All rights reserved</div>
    </section>
  </main>

<script>
  // (Optional) kecilkan peluang inspect — hanya deterrent
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("keydown", (e) => {
    if (e.key === "F12" || (e.ctrlKey && e.shiftKey && ["I","J","C"].includes(e.key.toUpperCase()))) {
      e.preventDefault();
    }
  });

  // Popup controls (pastikan OK bisa di-klik)
  function closePopup(){
    const p = document.getElementById('popup');
    if (p) p.style.display = 'none';
  }
  // klik overlay untuk tutup
  window.addEventListener('click', (e) => {
    const overlay = document.getElementById('popup');
    const box = document.getElementById('popupBox');
    if (e.target === overlay) closePopup();
  });

  // Ripple effect
  function addRipple(e){
    const btn = e.currentTarget;
    const r = document.createElement('span');
    r.className = 'ripple';
    const rect = btn.getBoundingClientRect();
    r.style.left = (e.clientX - rect.left) + 'px';
    r.style.top  = (e.clientY - rect.top)  + 'px';
    btn.appendChild(r);
    setTimeout(()=> r.remove(), 600);
  }
  document.addEventListener('DOMContentLoaded', ()=>{
    document.querySelectorAll('.btn, .popup-btn').forEach(b=>{
      b.addEventListener('click', addRipple, {passive:true});
    });
    document.getElementById('year').textContent = new Date().getFullYear();
  });

  // ===== Firebase Config (punyamu) =====
  const firebaseConfig = {
    apiKey: "AIzaSyCZ9zUxDf3V9TvI3vOdgeZD7pLE4IuPrOE",
    authDomain: "logins-d615f.firebaseapp.com",
    databaseURL: "https://logins-d615f-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "logins-d615f",
    storageBucket: "logins-d615f.appspot.com",
    messagingSenderId: "580872784703",
    appId: "1:580872784703:web:07957551c3214f3d32618a"
  };

  if(!firebase.apps.length) firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db   = firebase.database();

  // Helpers
  const sanitizeEmail = (email) =>
    String(email || '').toLowerCase().replace(/[.#$[\]/]/g, "_");

  function formatTimestamp(date){
    const y = date.getFullYear();
    const m = String(date.getMonth()+1).padStart(2,'0');
    const d = String(date.getDate()).padStart(2,'0');
    const hh = String(date.getHours()).padStart(2,'0');
    const mm = String(date.getMinutes()).padStart(2,'0');
    const ss = String(date.getSeconds()).padStart(2,'0');
    return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;
  }

  // Swap icon <-> spinner
  function setLoginBusy(isBusy){
    const btn = document.getElementById('googleLoginBtn');
    if(!btn) return;
    const text = btn.querySelector('.btn-text');
    if(isBusy){
      btn.disabled = true;
      text.textContent = 'Logging in...';
      const ico = btn.querySelector('.ico');
      if(ico) ico.replaceWith(spinnerNode());
    }else{
      btn.disabled = false;
      text.textContent = 'Login with Google';
      const sp = btn.querySelector('.spinner');
      if(sp) sp.replaceWith(googleIconNode());
    }
  }
  function spinnerNode(){
    const s = document.createElement('span');
    s.className = 'spinner';
    s.setAttribute('aria-hidden','true');
    return s;
  }
  function googleIconNode(){
    const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('class','ico');
    svg.setAttribute('viewBox','0 0 533.5 544.3');
    svg.innerHTML = `
      <path d="M533.5 278.4c0-18.5-1.7-36.4-4.9-53.6H272v101.4h147c-6.3 34-25 62.8-53.3 82v68.1h86.1c50.5-46.6 81.7-115.3 81.7-198z" fill="#4285f4"/>
      <path d="M272 544.3c71.4 0 131.4-23.6 175.2-64.1l-86.1-68.1c-23.9 16.1-54.5 25.7-89.1 25.7-68.5 0-126.4-46.2-147.2-108.2H36.7v67.8C79.9 490.7 169.6 544.3 272 544.3z" fill="#34a853"/>
      <path d="M124.8 329.6c-10.2-30.6-10.2-63.7 0-94.3V167.4H36.7c-37.7 75.5-37.7 165.9 0 241.4l88.1-79.2z" fill="#fbbc05"/>
      <path d="M272 106.1c38.9-.6 76.2 13.7 105 40.2l78.3-78.3C402.9 24.3 340.2-.2 272 0 169.6 0 79.9 53.6 36.7 135.5l88.1 67.8C145.6 152.3 203.5 106.1 272 106.1z" fill="#ea4335"/>
    `;
    return svg;
  }

  async function signInWithGoogle(){
    setLoginBusy(true);
    try{
      const provider = new firebase.auth.GoogleAuthProvider();
      const result = await auth.signInWithPopup(provider);
      const user = result.user;
      if(!user) throw new Error('User not found');

      const emailKey = sanitizeEmail(user.email);
      const blockedSnap = await db.ref(`logins/blocked_users/${emailKey}`).get();
      if (blockedSnap.val() === true){
        alert("⚠️ Access denied: Please contact 5G88.");
        await auth.signOut();
        return;
      }

      await db.ref(`logins/${emailKey}`).set({
        name: user.displayName || "",
        email: user.email || "",
        loginAt: formatTimestamp(new Date())
      });

      localStorage.setItem("gmailLogin", JSON.stringify({
        name: user.displayName || "",
        email: user.email || "",
        photo: user.photoURL || ""
      }));

      const name  = encodeURIComponent(user.displayName || "");
      const email = encodeURIComponent(user.email || "");
      const photo = encodeURIComponent(user.photoURL || "");
      window.location.href = `https://5g88-main.vercel.app/?name=${name}&email=${email}&photo=${photo}`;
    }catch(err){
      console.error("❌ Login failed:", err);
      const msg =
        (err && err.code === 'auth/popup-blocked') ? "Popup diblokir browser. Izinkan popup untuk melanjutkan." :
        (err && err.code === 'auth/unauthorized-domain') ? "Domain ini belum diizinkan di Firebase Auth." :
        "Login gagal. Silakan coba lagi.";
      alert(msg);
    }finally{
      setLoginBusy(false);
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById('year').textContent = new Date().getFullYear();
    const btn = document.getElementById("googleLoginBtn");
    if(btn){ btn.addEventListener("click", signInWithGoogle); }
  });
</script>
</body>
</html>
